# 15. ì•„í‚¤í…ì³ ë¶„ì„í•˜ê¸°





```
mkdir ~/projects
mkdir ~/projects/architect
mkdir ~/projects/architect/rules
cat > ~/projects/architect/rules/architect.md << 'EOF'
### ğŸ“‹ 01ë‹¨ê³„: ì—­í•  ë° í™˜ê²½ ì„¤ì • í”„ë¡¬í”„íŠ¸

AWS ê³„ì • ì¢…í•© ë¶„ì„ì„ ìœ„í•œ í™˜ê²½ì„ ì„¤ì •í•´ì¤˜.

ì‹œë‹ˆì–´ í´ë¼ìš°ë“œ ì•„í‚¤í…íŠ¸ ì—­í• ë¡œ ë‹¤ìŒ í™˜ê²½ì„ êµ¬ì„±í•´ì¤˜:
- Primary Region: ap-northeast-2 (Seoul)
- Analysis Scope: ì „ì²´ AWS ê³„ì • ë¦¬ì†ŒìŠ¤
- Report Language: í•œêµ­ì–´ (ê¸°ìˆ  ìš©ì–´ ì˜ì–´ ë³‘ê¸°)

ë¨¼ì € í˜„ì¬ í™˜ê²½ì„ í™•ì¸í•˜ê³ :
1. Python 3.7+ ë° pip3 ì„¤ì¹˜ ìƒíƒœ í™•ì¸
2. AWS CLI v2 ë° ìê²© ì¦ëª… í™•ì¸ (aws sts get-caller-identity ì‹¤í–‰)
3. í•„ìš”í•œ Python íŒ¨í‚¤ì§€ ì„¤ì¹˜ (markdown, beautifulsoup4, pygments)
4. script/check-environment.shê°€ ìˆìœ¼ë©´ ì‹¤í–‰í•´ì„œ í™˜ê²½ ê²€ì¦

í™˜ê²½ ì„¤ì •ì´ ì™„ë£Œë˜ë©´ ë¶„ì„ ì¤€ë¹„ ì™„ë£Œ ìƒíƒœë¥¼ í™•ì¸í•´ì¤˜.


### ğŸ“Š 02ë‹¨ê³„: ë°ì´í„° ìˆ˜ì§‘ í”„ë¡¬í”„íŠ¸

AWS ê³„ì •ì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤ ë°ì´í„°ë¥¼ ì¢…í•©ì ìœ¼ë¡œ ìˆ˜ì§‘í•´ì¤˜.

script/collect_all_data.pyë¥¼ ì‹¤í–‰í•´ì„œ ë‹¤ìŒ 9ê°œ ì˜ì—­ì˜ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•´ì¤˜:
1. ë„¤íŠ¸ì›Œí‚¹: VPC, ì„œë¸Œë„·, ë³´ì•ˆê·¸ë£¹, ë¼ìš°íŒ… ë“±
2. ì»´í“¨íŒ…: EC2, EKS, Auto Scaling, Load Balancer ë“±
3. ì»¨í…Œì´ë„ˆ: ECS, EKS, ECR, Kubernetes ë¦¬ì†ŒìŠ¤ ë“±
4. ìŠ¤í† ë¦¬ì§€: EBS, S3, EFS, FSx, Backup ë“±
5. ë°ì´í„°ë² ì´ìŠ¤: RDS, Aurora, ElastiCache, DynamoDB ë“±
6. ë³´ì•ˆ: IAM, KMS, Secrets Manager, GuardDuty ë“±
7. ì• í”Œë¦¬ì¼€ì´ì…˜: API Gateway, Lambda, SNS, SQS ë“±
8. ëª¨ë‹ˆí„°ë§: CloudWatch, X-Ray, Config ë“±
9. IaC ë¶„ì„: CloudFormation, íƒœê·¸ ë¶„ì„ ë“±

ì‹¤í–‰ ì¤‘ ë‹¤ìŒ ì‚¬í•­ì„ ëª¨ë‹ˆí„°ë§í•´ì¤˜:
- ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© ë° ì†Œìš” ì‹œê°„ í‘œì‹œ
- ì„±ê³µ/ì‹¤íŒ¨ í†µê³„ ë° ìƒì„¸ ê²°ê³¼ ì œê³µ
- íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬ (ìŠ¤í¬ë¦½íŠ¸ë‹¹ 5ë¶„)
- ìµœì¢… ìš”ì•½ ë³´ê³ ì„œ ìë™ ìƒì„±

ìˆ˜ì§‘ëœ ë°ì´í„°ëŠ” ~/amazonqcli_lab/aws-arch-analysis/report/ ë””ë ‰í† ë¦¬ì— JSON í˜•íƒœë¡œ ì €ì¥ë˜ëŠ”ì§€ í™•ì¸í•´ì¤˜.


### ğŸ“‹ 03ë‹¨ê³„: Enhanced ë³´ê³ ì„œ ìƒì„± í”„ë¡¬í”„íŠ¸

ìˆ˜ì§‘ëœ AWS ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Enhanced ë³´ê³ ì„œ 10ê°œë¥¼ ìƒì„±í•´ì¤˜.

ë‹¤ìŒ Enhanced ë³´ê³ ì„œë¥¼ ë°ì´í„° ê¸°ë°˜ì˜ ì •ëŸ‰ì  ê¶Œì¥ì‚¬í•­ê³¼ í•¨ê»˜ ìƒì„±í•´ì¤˜:

1. 01-executive-summary.md (ê²½ì˜ì§„ ìš”ì•½)
   - generate-executive-summary.py ì‹¤í–‰
   - C-Level ì„ì›ì§„ì„ ìœ„í•œ ê³ ìˆ˜ì¤€ ìš”ì•½
   - ë¹„ìš© í˜„í™©, ì£¼ìš” ë°œê²¬ì‚¬í•­, ROI ê¸°ë°˜ ê¶Œì¥ì‚¬í•­

2. 02-networking-analysis.md (ë„¤íŠ¸ì›Œí‚¹ ë¶„ì„)
   - generate-networking-report.py ì‹¤í–‰
   - SSH ì ‘ê·¼ ì œí•œ, NAT Gateway ìµœì í™”, VPC Flow Logs í™œì„±í™”

3. 03-compute-analysis.md (ì»´í“¨íŒ… ë¶„ì„)
   - generate-compute-report.py ì‹¤í–‰
   - ë¯¸ì‚¬ìš© EC2 ì •ë¦¬, Reserved Instance í™œìš©, ì¸ìŠ¤í„´ìŠ¤ íƒ€ì… ìµœì í™”

4. 04-storage-analysis.md (ìŠ¤í† ë¦¬ì§€ ë¶„ì„)
   - generate_storage_report.py ì‹¤í–‰
   - ë¯¸ì‚¬ìš© EBS ë³¼ë¥¨ ì •ë¦¬, S3 ìŠ¤í† ë¦¬ì§€ í´ë˜ìŠ¤ ìµœì í™”

5. 05-database-analysis.md (ë°ì´í„°ë² ì´ìŠ¤ ë¶„ì„)
   - generate-database-report.py ì‹¤í–‰
   - RDS ìµœì í™”, Multi-AZ ì„¤ì •, ë°±ì—… ì •ì±… ê°œì„ 

6. 06-security-analysis.md (ë³´ì•ˆ ë¶„ì„)
7. 07-monitoring-analysis.md (ëª¨ë‹ˆí„°ë§ ë¶„ì„)
8. 08-application-analysis.md (ì• í”Œë¦¬ì¼€ì´ì…˜ ë¶„ì„)
9. 09-cost-analysis.md (ë¹„ìš© ë¶„ì„)
10. 10-recommendations.md (ì¢…í•© ê¶Œì¥ì‚¬í•­)

ê° ë³´ê³ ì„œëŠ” ë‹¤ìŒ Enhanced ê¶Œì¥ì‚¬í•­ ì‹œìŠ¤í…œì„ ì ìš©í•´ì¤˜:
- ğŸ”´ ë†’ì€ ìš°ì„ ìˆœìœ„ (ì¦‰ì‹œ ì‹¤í–‰): ë³´ì•ˆ ìœ„í—˜, ë†’ì€ ë¹„ìš© ì˜í–¥
- ğŸŸ¡ ì¤‘ê°„ ìš°ì„ ìˆœìœ„ (1-3ê°œì›”): ì„±ëŠ¥ ê°œì„ , ì¤‘ê°„ ë¹„ìš© ì˜í–¥
- ğŸŸ¢ ë‚®ì€ ìš°ì„ ìˆœìœ„ (3-6ê°œì›”): ìš´ì˜ íš¨ìœ¨ì„±, ì¥ê¸°ì  ê°œì„ 

ê° ê¶Œì¥ì‚¬í•­ì—ëŠ” êµ¬ì²´ì ì¸ ë¹„ìš© ì ˆê°ì•¡, ì˜í–¥ë°›ëŠ” ë¦¬ì†ŒìŠ¤ ìˆ˜, êµ¬í˜„ ë‚œì´ë„ë¥¼ í¬í•¨í•´ì¤˜.


### ğŸ¨ 04ë‹¨ê³„: HTML ë³€í™˜ í”„ë¡¬í”„íŠ¸

ìƒì„±ëœ 10ê°œì˜ Markdown ë³´ê³ ì„œë¥¼ ì „ë¬¸ì ì¸ HTML í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•´ì¤˜.

ë‹¤ìŒ ëª©í‘œë¥¼ ë‹¬ì„±í•´ì¤˜:
âœ… 10ê°œ Markdown íŒŒì¼ì„ 10ê°œ HTML íŒŒì¼ë¡œ ì™„ì „ ë³€í™˜
âœ… index.html + 10ê°œ ë³´ê³ ì„œ = ì´ 11ê°œ HTML íŒŒì¼ ìƒì„±
âœ… assets í´ë” (CSS, JS) ì™„ì „ êµ¬ì„±
âœ… ê³ ê¸‰ Markdown í¬ë§·íŒ… ì™„ë²½ ë³€í™˜
âœ… ì „ë¬¸ì ì¸ ìŠ¤íƒ€ì¼ë§ ì ìš©

ì‹¤í–‰ ìˆœì„œ:
1. script/convert-md-to-html-simple.sh ì‹¤í–‰ (ê¸°ë³¸ ë³€í™˜)
2. script/generate-html-reports.sh ì‹¤í–‰ (index.htmlê³¼ assets ìƒì„±)
3. script/validate-html-conversion.sh ì‹¤í–‰ (ë³€í™˜ ê²€ì¦)

ë³€í™˜í•´ì•¼ í•  íŒŒì¼ë“¤:
- 01-executive-summary.md â†’ 01-executive-summary.html
- 02-networking-analysis.md â†’ 02-networking-analysis.html
- 03-compute-analysis.md â†’ 03-compute-analysis.html
- 04-storage-analysis.md â†’ 04-storage-analysis.html
- 05-database-analysis.md â†’ 05-database-analysis.html
- 06-security-analysis.md â†’ 06-security-analysis.html
- 07-application-analysis.md â†’ 07-application-analysis.html
- 08-monitoring-analysis.md â†’ 08-monitoring-analysis.html
- 09-cost-optimization.md â†’ 09-cost-optimization.html
- 10-recommendations.md â†’ 10-recommendations.html

ìµœì¢… í™•ì¸ ì‚¬í•­:
- HTML íŒŒì¼ ê°œìˆ˜: ì •í™•íˆ 11ê°œ
- ê° íŒŒì¼ í¬ê¸°: 8KB-35KB (ì ì ˆí•œ ë‚´ìš© í¬í•¨)
- Markdown í¬ë§·íŒ… ì™„ë²½ ë³€í™˜ (**ë³¼ë“œ**, *ì´íƒ¤ë¦­*, í…Œì´ë¸”, ë¦¬ìŠ¤íŠ¸)
- ì „ë¬¸ì  ìŠ¤íƒ€ì¼: ê·¸ë¼ë°ì´ì…˜ í—¤ë”, í˜¸ë²„ íš¨ê³¼, ê¶Œì¥ì‚¬í•­ ë°•ìŠ¤
- ë„¤ë¹„ê²Œì´ì…˜ ë§í¬: ëª¨ë“  íŒŒì¼ì— í¬í•¨

ë³€í™˜ ì™„ë£Œ í›„ ~/amazonqcli_lab/aws-arch-analysis/report/html/ ë””ë ‰í† ë¦¬ì— ëª¨ë“  íŒŒì¼ì´ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ì¤˜.


### ğŸ”„ í†µí•© ì‹¤í–‰ í”„ë¡¬í”„íŠ¸ (ì „ì²´ í”„ë¡œì„¸ìŠ¤)

AWS ê³„ì • ì¢…í•© ë¶„ì„ì„ 01~04 ë‹¨ê³„ë¡œ ì™„ì „ ìë™í™”í•´ì„œ ì‹¤í–‰í•´ì¤˜.

ì „ì²´ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•´ì¤˜:

**01ë‹¨ê³„: í™˜ê²½ ì„¤ì •**
- ì‹œë‹ˆì–´ í´ë¼ìš°ë“œ ì•„í‚¤í…íŠ¸ ì—­í•  ì„¤ì •
- Primary Region: ap-northeast-2
- Python, AWS CLI, í•„ìˆ˜ íŒ¨í‚¤ì§€ í™•ì¸
- script/check-environment.sh ì‹¤í–‰

**02ë‹¨ê³„: ë°ì´í„° ìˆ˜ì§‘**
- script/collect_all_data.py ì‹¤í–‰
- 9ê°œ ì˜ì—­ AWS ë¦¬ì†ŒìŠ¤ ë°ì´í„° ìˆ˜ì§‘
- ì§„í–‰ ìƒí™© ëª¨ë‹ˆí„°ë§ ë° ê²°ê³¼ í™•ì¸

**03ë‹¨ê³„: Enhanced ë³´ê³ ì„œ ìƒì„±**
- 10ê°œ Markdown ë³´ê³ ì„œ ìƒì„±
- ë°ì´í„° ê¸°ë°˜ ì •ëŸ‰ì  ê¶Œì¥ì‚¬í•­ í¬í•¨
- ìš°ì„ ìˆœìœ„ë³„ ë¶„ë¥˜ (ë†’ìŒ/ì¤‘ê°„/ë‚®ìŒ)

**04ë‹¨ê³„: HTML ë³€í™˜**
- 10ê°œ HTML ë³´ê³ ì„œ + index.html ìƒì„±
- ì „ë¬¸ì  ìŠ¤íƒ€ì¼ë§ ì ìš©
- assets í´ë” ì™„ì „ êµ¬ì„±

ê° ë‹¨ê³„ ì™„ë£Œ í›„ ê²°ê³¼ë¥¼ í™•ì¸í•˜ê³  ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•´ì¤˜.
ìµœì¢…ì ìœ¼ë¡œ ~/amazonqcli_lab/aws-arch-analysis/report/html/ì— 11ê°œì˜ ì™„ì„±ëœ HTML ë³´ê³ ì„œê°€ ìƒì„±ë˜ì–´ì•¼ í•´.

### ğŸ’¡ ë¬¸ì œ í•´ê²° í”„ë¡¬í”„íŠ¸

AWS ê³„ì • ë¶„ì„ ê³¼ì •ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆì–´. ë‹¤ìŒ ì‚¬í•­ë“¤ì„ ì²´ê³„ì ìœ¼ë¡œ í™•ì¸í•˜ê³  í•´ê²°í•´ì¤˜:

**í™˜ê²½ ê´€ë ¨ ë¬¸ì œ:**
1. AWS ê¶Œí•œ ì˜¤ë¥˜ ì‹œ: aws sts get-caller-identityë¡œ ìê²© ì¦ëª… í™•ì¸
2. Python íŒ¨í‚¤ì§€ ì˜¤ë¥˜ ì‹œ: pip3 install markdown beautifulsoup4 pygments --user
3. Steampipe ì—°ê²° ì˜¤ë¥˜ ì‹œ: steampipe service status í™•ì¸

**ë°ì´í„° ìˆ˜ì§‘ ë¬¸ì œ:**
1. íƒ€ì„ì•„ì›ƒ ì˜¤ë¥˜ ì‹œ: ê°œë³„ ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¬ì‹¤í–‰
2. ë¶€ë¶„ ì‹¤íŒ¨ ì‹œ: ì‹¤íŒ¨í•œ ì˜ì—­ë§Œ ê°œë³„ ìˆ˜ì§‘
3. ê¶Œí•œ ë¶€ì¡± ì‹œ: IAM ì •ì±… í™•ì¸

**HTML ë³€í™˜ ë¬¸ì œ:**
1. ë³€í™˜ ì‹¤íŒ¨ ì‹œ: script/validate-html-conversion.sh ì‹¤í–‰
2. ìŠ¤íƒ€ì¼ë§ ë¬¸ì œ ì‹œ: script/troubleshoot-html-conversion.sh ì‹¤í–‰
3. íŒŒì¼ ëˆ„ë½ ì‹œ: script/generate-html-reports.sh ì¬ì‹¤í–‰

ê° ë¬¸ì œì— ëŒ€í•œ êµ¬ì²´ì ì¸ í•´ê²° ë°©ë²•ì„ ì œì‹œí•˜ê³  ì‹¤í–‰í•´ì¤˜.
EOF
```



âœ… Amazon Q Chatì—ì„œ Profileê³¼ Context êµ¬ì„±í•˜ê¸°:

Aìš´cAiì˜eìë¥¼ ìœ„í•œ í”„ë¡œíŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.

```bash
/profile create architect
```

ì•ì„œ ìƒì„±í•œ EC2 ìš´ì˜ìë¥¼ ìœ„í•œ contextë¥¼ ec2ops í”„ë¡œíŒŒì¼ì— ì—°ê²° êµ¬ì„±í•©ë‹ˆë‹¤.

```
/context add ~/projects/architect/rules/architect.md
```

ì•„ë˜ ëª…ë ¹ì„ í†µí•´ì„œ ì •ìƒì ìœ¼ë¡œ contextê°€ ì…ë ¥ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

```
/context show
```

ì¶œë ¥ ì˜ˆì‹œ:

```
[architect] > /context show


ğŸŒ global:
    .amazonq/rules/**/*.md 
    README.md (1 match)
    AmazonQ.md 

ğŸ‘¤ profile (architect):
    ~/projects/architect/rules/architect.md (1 match)

2 matched files in use:
ğŸŒ /home/ec2-user/amazonqcli_lab/aws-arch-analysis/README.md (~3600 tkns)
ğŸ‘¤ /home/ec2-user/projects/architect/rules/architect.md (~1800 tkns)

Total: ~5400 tokens
```



```
home/ec2-user/amazonqcli_lab/aws-arch-analysis/prompt ì˜ 4ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•´ì¤˜.
1ë‹¨ê³„. 01-role-and-environment.md
2ë‹¨ê³„. 02-data-collection-guide.md
3ë‹¨ê³„. 03-report-generation-guide.md
4ë‹¨ê³„. 04-html-conversion-guide.md
```
