---
description: 'Update : 2025.07.20'
---

# 09.Q CLI ê¸°ë°˜ í”Œë«í¼ ìš´ì˜ í™˜ê²½ ì„¤ì •

{% hint style="warning" %}
Amazon Q CLI ê¸°ë°˜ í”Œë«í¼ ìš´ì˜í•˜ê¸° ëª©ì°¨ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œëŠ”, AWS ìì›ì´ ë°°í¬ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ë¹„ìš©ì´ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.
{% endhint %}

## ğŸ§© Amazon Q CLI ì‹¤ìŠµ í™˜ê²½ êµ¬ì„±

Amazon Q CLIì˜ ê³ ê¸‰ ê¸°ëŠ¥ì„ ì‹¤ìŠµí•  ìˆ˜ ìˆëŠ” í´ë¼ìš°ë“œ ê¸°ë°˜ í™˜ê²½ì„ ìë™ìœ¼ë¡œ êµ¬ì„±í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ë¶€í„° ê°œë°œ ë„êµ¬, AI í†µí•© ë„êµ¬(MCP)ê¹Œì§€ í¬í•¨ëœ ì¢…í•©ì  í•™ìŠµ í™˜ê²½ì…ë‹ˆë‹¤.

***

### ğŸ§ª ì•„í‚¤í…ì²˜ êµ¬ì„±

#### âœ… ì‹¤ìŠµ ì¸í”„ë¼ í™˜ê²½

<figure><img src="../.gitbook/assets/image.png" alt=""><figcaption></figcaption></figure>

Amazon Q CLI ê¸°ë°˜ í”Œë«í¼ ìš´ì˜ LABì€ ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì€ ì•„í‚¤í…ì³ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

#### âœ… ì„œë¹„ìŠ¤ êµ¬ì„± ìš”ì•½

* MgmtVPC : IGW, Public Subnet, Private Subnet,&#x20;
* **DMZ VPC**: IGW , Public Subnet, Private Subnet , EC2 , NAT Gateway, Amazon Network Firewall(ANFW), Amazon EKS Cluster, Redis, OpenSearch
* **VPC01**: Private Subnet, EC2, Aurora MySQL
* **VPC02**: Private Subnet, EC2
* **ì„ íƒì‚¬í•­**: Amazon EKS , Redis, OpenSearch, Aurora MySQL

***

### ğŸ§ª ë¹ ë¥¸ ì‹œì‘

#### âœ… ì €ì¥ì†Œ í´ë¡  ë° ì´ë™

```bash
git clone https://github.com/whchoi98/amazonqcli_lab.git
cd amazonqcli_lab/LabSetup
```

#### âœ… ì¸í”„ë¼ ìë™ ë°°í¬

3ê°œì˜ VPCë¥¼ ì•„ë˜ì™€ ê°™ì€ Shell Scriptë¡œ ë°°í¬í•©ë‹ˆë‹¤.&#x20;

í•´ë‹¹ Shell ScriptëŠ” 3ê°œì˜ VPCë¥¼ êµ¬ì„±í•˜ëŠ” Claudformation Stackì„ ë™ì‹œì— ë°°í¬í•©ë‹ˆë‹¤.&#x20;

(DMZVPC, VPC01, VPC02)

```bash
./0.depoly-all-vpcs.sh     # ë³‘ë ¬ VPC ë°°í¬

```

VPCê°„ì˜ ì—°ê²° êµ¬ì„±ì„ TGWë¥¼ í†µí•´ì„œ êµ¬ì„±í•©ë‹ˆë‹¤.

í•´ë‹¹ Shell ScriptëŠ” ë°°í¬ëœ 3ê°œì˜ VPCë¥¼ Transit Gatewayë¡œ ì—°ê²°í•˜ëŠ” Cloudformation Stackì„ ë°°í¬í•©ë‹ˆë‹¤.

```
./0.deploy-tgw.sh          # Transit Gateway ë°°í¬

```

âœ… ê°œë°œ í™˜ê²½ êµ¬ì„±

ì•„ë˜ êµ¬ì„±ì€ ì‹¤ìŠµí™˜ê²½ì— í•„ìš”í•œ í™˜ê²½ë³€ìˆ˜ì™€ ë„êµ¬ë“¤ ë° KMSë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.

```bash
./1.vscode-tools-installer.sh
./2.set-aws-env.sh
./3.kms-setup.sh

```

#### âœ… Amazon Q CLI ë° MCP ì„¤ì •

ì•„ë˜ êµ¬ì„±ì€ ì´ ê³¼ì •ì—ì„œ í•„ìš”í•œ ì£¼ìš” MCP ì„¤ì¹˜ì™€ í™˜ê²½ êµ¬ì„±ì„ í¬í•¨í•˜ëŠ” Shell Script ì…ë‹ˆë‹¤.

```bash
./4.install_core_mcp.sh
./5.setup-mcp-config.sh

```

***

### ğŸ§ª ë°°í¬ ê°€ì´ë“œ ìš”ì•½

#### ğŸ§ª Phase 1: ë„¤íŠ¸ì›Œí‚¹ ì¸í”„ë¼

**âœ… VPC êµ¬ì„± (0.depoly-all-vpcs.sh)**

* DMZ VPC: Public/NAT ì„œë¸Œë„·, IGW, NATGW, ANFW
* VPC01/VPC02: Private ì„œë¸Œë„·, ë¼ìš°íŒ… í…Œì´ë¸”
* ë³‘ë ¬ ë°°í¬, S3 ì—…ë¡œë“œ í¬í•¨ ë° ë°°í¬ í›„ S3 ì‚­ì œ

**âœ… Transit Gateway ì„¤ì • (0.deploy-tgw.sh)**

* TGW ìƒì„± ë° VPC ì—°ê²°
* TGW ë¼ìš°íŒ… í…Œì´ë¸” ì„¤ì • - DMZVPC, VPC01, VPC02

#### ğŸ§ª Phase 2: ê°œë°œ í™˜ê²½

**âœ… ê°œë°œ ë„êµ¬ ì„¤ì¹˜ (1.vscode-tools-installer.sh)**

* AWS CLI, kubectl, eksctl, helm, k9s
* jq, fzf, bash-completion ë“±

**âœ… AWS í™˜ê²½ êµ¬ì„± (2.set-aws-env.sh)**

* í”„ë¡œíŒŒì¼ ë° ë¦¬ì „ ë³€ìˆ˜ ì„¤ì •

**âœ… KMS í‚¤ êµ¬ì„± (3.kms-setup.sh)**

* ì•”í˜¸í™”ìš© KMS í‚¤ ë° ë³„ì¹­ êµ¬ì„±ìœ¼ë¡œ EKS ë°°í¬ì‹œ EBS ì•”í˜¸í™”ë¥¼ ìœ„í•´ ì„¤ì •

#### ğŸ§ª Phase 3: Amazon Q CLI ë° MCP

**âœ… ëŸ°íƒ€ì„ ì„¤ì¹˜ (4.install\_core\_mcp.sh)**

* AWS MCP ì„¤ì •ì„ ìœ„í•œ í™˜ê²½ êµ¬ì„±ìœ¼ë¡œ Python 3.12, uv, Node.js ì„¤ì¹˜ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.&#x20;

**âœ… MCP ì„œë²„ êµ¬ì„± (5.setup-mcp-config.sh)**

* MCP êµ¬ì„± íŒŒì¼ ìƒì„± (\~/.aws/amazonq/mcp.json)&#x20;
* Amazon Q CLIì™€ ì—°ë™

***

### ğŸ§ª ì„ íƒì  ì„œë¹„ìŠ¤ ë°°í¬

DMZVPC01&#x20;

```
./0.deploy-redis.sh
```



```
./0.deploy-aurora.sh
```



```
./deploy-opensearch.sh
```



```
# eksctl êµ¬ì„± ë° ë°°í¬
./dmz_eksctl_shell.sh

# í´ëŸ¬ìŠ¤í„° êµ¬ì„± í™•ì¸ (dry-run)
eksctl create cluster --config-file=/home/ec2-user/amazonqcli_lab/LabSetup/eksworkshop.yaml --dry-run

# ì‹¤ì œ í´ëŸ¬ìŠ¤í„° ìƒì„±
eksctl create cluster --config-file=/home/ec2-user/amazonqcli_lab/LabSetup/eksworkshop.yaml
```

<table><thead><tr><th>ğŸ”— ì„œë¹„ìŠ¤</th><th>ğŸŒ ìœ„ì¹˜</th><th>ğŸ–¥ï¸ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸</th><th>ğŸ§¾ í…œí”Œë¦¿</th></tr></thead><tbody><tr><td>Redis (ElastiCache)</td><td>DMZ VPC</td><td><code>./0.deploy-redis.sh</code></td><td><code>redis-cluster-stack.yml</code></td></tr><tr><td>Aurora MySQL</td><td>VPC01</td><td><code>./0.deploy-aurora.sh</code></td><td><code>aurora-mysql-stack.yml</code></td></tr><tr><td>OpenSearch</td><td>DMZ VPC</td><td><code>./deploy-opensearch.sh</code></td><td><code>opensearch-stack.yml</code></td></tr><tr><td>Amazon EKS</td><td>DMZ VPC</td><td><p></p><pre><code>./dmz_eks_shell.sh

# eksctl êµ¬ì„± ë° ë°°í¬
./dmz_eksctl_shell.sh

# í´ëŸ¬ìŠ¤í„° êµ¬ì„± í™•ì¸ (dry-run)
eksctl create cluster --config-file=/home/ec2-user/amazonqcli_lab/LabSetup/eksworkshop.yaml --dry-run

# ì‹¤ì œ í´ëŸ¬ìŠ¤í„° ìƒì„±
eksctl create cluster --config-file=/home/ec2-user/amazonqcli_lab/LabSetup/eksworkshop.yaml
</code></pre></td><td><code>eksworkshop.yaml</code></td></tr></tbody></table>

***

### ğŸ§ª ë””ë ‰í„°ë¦¬ êµ¬ì¡°

```
LabSetup/
â”œâ”€â”€ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ 0.depoly-all-vpcs.sh
â”‚   â”œâ”€â”€ 0.deploy-tgw.sh
â”‚   â”œâ”€â”€ 0.deploy-redis.sh
â”‚   â””â”€â”€ 0.deploy-aurora.sh
â”œâ”€â”€ í™˜ê²½ ì„¤ì •
â”‚   â”œâ”€â”€ 1.vscode-tools-installer.sh
â”‚   â”œâ”€â”€ 2.set-aws-env.sh
â”‚   â””â”€â”€ 3.kms-setup.sh
â”œâ”€â”€ MCP ë° Q CLI ì„¤ì •
â”‚   â”œâ”€â”€ 4.install_core_mcp.sh
â”‚   â””â”€â”€ 5.setup-mcp-config.sh
â”œâ”€â”€ EKS ê´€ë ¨
â”‚   â”œâ”€â”€ dmz_eks_shell.sh
â”‚   â”œâ”€â”€ dmz_eksctl_shell.sh
â”‚   â””â”€â”€ dmz_eks_cleanup.sh
â”œâ”€â”€ ì¶”ê°€ ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ deploy-opensearch.sh
â””â”€â”€ CloudFormation í…œí”Œë¦¿
    â”œâ”€â”€ 1.DMZVPC.yml
    â”œâ”€â”€ 2.VPC01.yml
    â”œâ”€â”€ 3.VPC02.yml
    â”œâ”€â”€ 4.TGW.yml
    â”œâ”€â”€ aurora-mysql-stack.yml
    â”œâ”€â”€ redis-cluster-stack.yml
    â””â”€â”€ opensearch-stack.yml
```

***

> âœ… ì´ì œ ì´ ì‹¤ìŠµ í™˜ê²½ì„ ê¸°ë°˜ìœ¼ë¡œ Amazon Q CLI, MCP, VSCode ë° ë‹¤ì–‘í•œ AI ê°œë°œ ë„êµ¬ë¥¼ í†µí•©í•œ ì‹¤ì „ ì‹¤ìŠµì„ ì§„í–‰í•´ë³´ì„¸ìš”!
