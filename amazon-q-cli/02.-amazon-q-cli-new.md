# 02. Amazon Q CLI 시작하기 (New)

### 🧩 1. Amazon Q CLI 시작하기: 주요 요약 (Setting up & Getting Started)

이제 본격적인 실습에 앞서 Amazon Q CLI를 설치하고 초기 설정을 진행할 준비가 되었습니다. 본 랩(Lab)에서는 다음 항목들을 수행합니다:

* Amazon Q CLI 사용을 위한 **Builder ID** 등록
* Amazon Q CLI 다운로드 및 설치
* 구성(Configuration) 옵션 탐색

***

### 🧪 Task 01: 실험적 기능 실습 - Amazon Q CLI 설치 및 로그인 (Installation & Login Lab)

#### 🧾 Builder ID 생성 (Creating your Builder ID)

> 💡 **이미 Builder ID가 있는 경우, 본 단계를 생략해도 됩니다.**

Amazon Q CLI를 사용하려면 먼저 **Builder ID**를 생성해야 합니다. 이는 AWS 계정과는 별개의 ID로, Amazon Q를 포함한 여러 개발 도구 및 서비스에 접근하는 데 사용됩니다. 유효한 이메일 주소만 있으면 간단히 생성할 수 있습니다.

1. [Builder ID 페이지](https://view.awsapps.com/start)에 접속하여 **"Sign in with Builder ID"** 버튼을 클릭합니다.
2. 브라우저 팝업 창이 열리면 이메일 주소를 입력한 후 , 표시 이름(Alias)을 설정합니다 .
3. 입력한 이메일로 인증 코드가 전송되며, 해당 코드를 입력합니다 .
4. 이메일은 몇 초 내에 도착하지만, 확인이 되지 않을 경우 스팸 메일함도 확인하세요 .
5. 인증 코드를 입력하면 계정이 확인되고 , 성공 메시지가 표시됩니다.
6. 이후 초기 로그인 화면으로 돌아가 이메일 주소 와 비밀번호를 입력하면, Builder 프로필 페이지에 접근할 수 있습니다.

> 💬 **Builder ID란?** \
> AWS의 다양한 개발 도구에서 사용되는 인증 계정이며, AWS 계정과는 별도로 운영됩니다. 예를 들어, VSCode, Jetbrains, Eclipse 등의 Amazon Q 플러그인 사용 시 필요합니다.

**Builder ID 로그아웃**

* 로그아웃이 필요한 경우, Builder ID 프로필 페이지 좌측 상단의 **Sign Out** 버튼을 클릭하면 됩니다.

***

#### 💻  Amazon Q CLI 설치 (Installing Amazon Q CLI)

Builder ID 생성을 완료했다면, 이제 Amazon Q CLI를 다운로드하고 설치 및 구성할 수 있습니다. 그 전에 먼저 터미널(Terminal)과 셸(Shell)에 대한 개념을 간단히 이해해야 합니다.

**🧮 터미널(Terminal)과 셸(Shell)**

* **터미널(Terminal)**: 텍스트 기반 명령을 입력할 수 있는 소프트웨어 인터페이스로, 시스템과 상호작용할 수 있습니다.
* **셸(Shell)**: 사용자가 입력한 명령어를 해석하고 실행하는 프로그램으로, 터미널을 통해 구동됩니다.

예: Linux/Mac 환경에서는 bash 또는 zsh, Windows에서는 Command Prompt 또는 PowerShell이 셸로 사용됩니다. \
Amazon Q CLI는 다양한 터미널 소프트웨어(iTerm2, Ghostty, tux 등)에서 실행 가능하며, 현재 **bash**, **zsh**, **fish** 셸을 지원합니다.

***

#### ⚙️ 운영체제(Operating System)별 설치 옵션

**🪟 Windows**

* Windows에서는 현재 WSL (Windows Subsystem for Linux)을 이용해 Amazon Q CLI를 설치해야 합니다.
* 공식 가이드를 참고하세요:[ _Installing Amazon Q CLI in WSL_](https://dev.to/aws/the-essential-guide-to-installing-amazon-q-developer-cli-on-windows-lmh)
* 🧪 참고: Amazon Q CLI는 오픈소스이므로 직접 소스 코드를 컴파일하여 실행 파일을 생성할 수도 있습니다. 단, 보안 정책에 따라 주의해서 활용하세요.

**🍎 MacOS**

* 가장 간편한 설치 방법은 **Homebrew**를 사용하는 것입니다:

```bash
brew install amazon-q
```

* 바이너리(binary) 배포본을 직접 다운로드하여 설치하는 방법도 있습니다.

**🐧 Linux**

* Linux는 다양한 배포판이 있으므로, 설치 방식도 다양합니다.

**🔹 전체 설치 (Full Installation)**

* GUI 기반 환경에서 사용 가능
* `.deb` 패키지(Ubuntu 22 이상) 또는 AppImage 이용 가능
* CLI 채팅, GUI 패널, 자동완성 기능 포함

**🔹 최소 설치 (Minimal Installation)**

* 텍스트 기반 CLI 기능만 제공
* GUI 없는 서버나 원격 시스템에서도 작동
* `.zip` 파일을 다운로드 후 수동 설치

**🔹 소스 컴파일 (Compile from Source)**

* 고급 사용자는 소스 코드를 빌드하여 자신만의 바이너리를 만들 수 있음
* 관련 블로그 참조 (Supporting Resources)

```
#glibc 버전확인
ldd --version
# Q CLI 다운로드
curl --proto '=https' --tlsv1.2 -sSf \
  "https://desktop-release.q.us-east-1.amazonaws.com/latest/q-x86_64-linux.zip" \
  -o "q.zip"
#압축 해제 및 설치
unzip q.zip
./q/install.sh
```

설치가 완료되면 Q CLI는 /usr/local/bin/q 경로에 등록됩니다.

***

#### 🔐 Amazon Q CLI 로그인 (Logging in)

Builder ID가 준비되었다면, 아래 명령어를 통해 로그인할 수 있습니다:

```bash
q login
```

* 터미널에 로그인 옵션이 나타납니다:

```
? Select login method ›
❯ Use for Free with Builder ID
  Use with Pro license
```

* "Use for Free with Builder ID" 선택 시, 브라우저 창이 열리며 로그인 절차가 진행됩니다. 브라우저 접근이 불가능한 경우, 다음과 같이 OAuth 디바이스 플로우(Device Flow)로 진행됩니다:

```
Code: xxxxxx
Open this URL: https://view.awsapps.com/start/#/device?user_code=xxxxx
▰▰▱▱▱▱▱ Logging in...
```

* 브라우저에서 인증을 완료하고 터미널로 돌아오면 다음과 같은 메시지가 나타납니다:

```
Logged in successfully
```

**🔄 추가 로그인 옵션**

* `q login --licence pro` 또는 `q login --licence free` 로그인 유형 지정
* `q login --use-device-flow` 디바이스 플로우 강제 사용
* Pro 로그인 시에는 아래 두 옵션 추가 필요:
  * `--identity-provider {URL}` AWS Identity Center의 공급자 URL
  * `--region {REGION}` 해당 Identity Center가 위치한 AWS 리전(Region)

**🔓 로그아웃**

```bash
q logout
```

***

#### 🧪 설치 확인 (Confirming installation)

설치가 정상적으로 완료되었는지 확인하려면 아래 명령어를 실행합니다:

```bash
q doctor
```

정상일 경우:

```
✔ Everything looks good!
```

문제가 있다면 `q issue` 명령어를 통해 문제 보고도 가능합니다.

**🔎 버전 확인**

```bash
q -V
```

예시:

```
q 1.16.2
```

※ 1.9.1 미만 버전은 문제 발생 가능성이 있으니 설치 방법을 다시 확인하세요.

**📦 업데이트**

```bash
q update
```

업데이트 확인 후 자동 설치 여부를 묻는 메시지가 나타납니다.

**📜 변경 로그 보기**

```bash
q version --changelog             # 최신 변경사항 확인
q version --changelog 1.16.2      # 특정 버전 확인
```

***

#### 🗂️ 채팅 기록 확인 (CLI Chat History)

v1.16부터 사용자의 모든 명령어가 아래 경로에 저장됩니다:

```
~/.aws/amazonq/.cli_bash_history
```

아래 명령어로 확인해 봅니다.

```
less ~/.aws/amazonq/.cli_bash_history
```

***

#### 💼 Professional Tier 업그레이드 (Upgrading to Professional Tier)

기본 무료 플랜으로 대부분 기능을 사용할 수 있지만, 제한에 도달하면 Pro 요금제로 업그레이드할 수 있습니다.

```bash
/subscribe
```

* AWS 계정이 필요하며, 월 $19(2024년 6월 기준)의 과금이 발생합니다.
* 업그레이드 시 Amazon Q Developer 구독 설정 화면에 자동 등록됩니다.
* AWS Billing에서 해당 비용 확인 가능하며, AWS 크레딧 사용 가능합니다.

**📉 구독 취소 방법**

* AWS 콘솔에서 Builder ID를 선택 후 **Unsubscribe** 버튼 클릭
* Pro 요금제 → 일반 Builder ID로 전환됨

***

### 📝 요약

* **Builder ID**는 Amazon Q CLI 사용을 위한 필수 계정이며, AWS 계정과 별개입니다.
* **설치**는 운영체제에 따라 다양한 방법이 있으며, GUI 환경과 비GUI 환경 모두 지원됩니다.
* **로그인**은 Builder ID를 통해 터미널 또는 브라우저에서 인증하며, 추가 로그인 옵션도 지원됩니다.
* **기능 확인**은 `q doctor`, `q update`, `q version` 명령어로 수행할 수 있습니다.
* **히스토리 기록** 및 **Pro 플랜 업그레이드**도 CLI에서 간편하게 처리할 수 있습니다.

> ✅ 다음 단계에서는 Amazon Q CLI를 실제 프로젝트에 적용하고, Custom Agent를 활용한 자동화된 개발 환경 구성으로 나아갑니다.
