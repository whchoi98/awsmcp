---
description: 'Update : 2025.09.22'
---

# 03. Amazon Q CLI 고급 환경 설정 (New)

## 🧠 Advanced Setup: Amazon Q CLI 고급 구성 (Diving deeper into Amazon Q CLI setup)

이 섹션은 선택 사항(Optional)으로, Amazon Q CLI의 설치 및 구성에 대해 더 깊이 살펴보고자 하는 사용자를 위한 고급 가이드입니다.

***

### 🔧 Amazon Q CLI 구성 탐색 (Exploring Amazon Q CLI configuration)

이 섹션은 Amazon Q CLI의 동작을 개인 환경에 맞게 최적화하고 조정하고자 하는 분들을 위한 것입니다.&#x20;

#### 📁 디렉터리 구조 (Directory structure)

Amazon Q CLI는 터미널(Terminal)에서 실행되며, 실행 당시의 디렉터리를 프로젝트 워크스페이스 디렉토리(Project Workspace directory)라고 합니다. 해당 디렉터리에 `.amazonq/` 디렉터리가 존재한다면, CLI는 그 안의 설정 파일을 자동으로 참조합니다.

또한 Amazon Q CLI는 항상 전역 디렉터리인 `~/.aws/amazonq`에서도 설정 파일을 탐색합니다.

요약하면 다음과 같습니다:

* **전역 디렉터리(Global Amazon Q CLI directory)**: `~/.aws/amazonq`
  * 전역 설정, 프로필(Profile), MCP(Model Context Protocol) 설정 포함
* **프로젝트 디렉터리(Project Workspace directory)**: 현재 디렉터리 내 `.amazonq/`
  * 프로젝트 특화 설정 파일 포함

> ⚠️ 현재는 해당 설정들을 변경할 필요는 없습니다. 이 정보는 향후 설정 커스터마이징에 도움이 되는 배경 지식입니다.

***

### 🐞 로깅 및 디버깅 옵션 (Logging and debugging options)

#### 📂 로그 확인 경로 (View logs)

* **macOS**: `$TMPDIR/qlog/`
* **Linux**: `~/.local/share/amazonq/logs/`
* **Windows**: `~/.local/share/amazonq/logs/`

#### 로그 레벨 설정 (Configure log level)

```bash
export Q_LOG_LEVEL=debug
q
```

사용 가능한 로그 레벨:

* `error`: 오류 메시지만 출력 (기본값)
* `warn`: 경고 및 오류 메시지
* `info`: 정보, 경고, 오류 메시지
* `debug`: 디버깅 포함 전체 로그
* `trace`: 매우 상세한 추적 로그 포함

#### 실시간 로그 보기 (Realtime log monitoring)

```bash
q debug log
```

로그 레벨에 따라 실시간으로 정보를 확인할 수 있으며, 문제 해결에 유용합니다.

기타 명령어:

```bash
q debug help
```

***

### 🩺 진단 정보 확인 (Getting diagnostic info)

```bash
q diagnostic
```

해당 명령어를 실행하면 CLI의 설치 상태에 대한 요약 정보를 확인할 수 있습니다.

출력 예시:

```ini
[q-details]
version = "1.16.2"
hash = "ad0c864cba444a41b06b43e119f1d6bbc21bcf06"
date = "2025-09-19T04:21:04.165863Z (3d ago)"
variant = "minimal"

[system-info]
chip = "Intel(R) Xeon(R) Platinum 8375C CPU @ 2.90GHz"
total-cores = 4
memory = "30.81 GB"

[system-info.os.linux]
kernel_version = "6.1.150-174.273.amzn2023.x86_64"
id = "amzn"
name = "Amazon Linux"
pretty_name = "Amazon Linux 2023.8.20250915"
version_id = "2023"
version = "2023"

[environment]
cwd = "/home/USER"
cli-path = "/home/USER"
os = "Linux"
shell-path = "/usr/bin/bash"
shell-version = "5.2.15"
terminal = "VSCode"
install-method = "unknown"

[env-vars]
PATH = "/home/USER/.local/bin:/usr/local/lib/code-server/lib/vscode/bin/remote-cli:/home/USER/.local/bin:/home/USER/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin"
Q_SET_PARENT_CHECK = "1"
SHELL = "/bin/bash"
TERM = "xterm-256color"
```

***

### ⚙️ 설정 명령어 및 파일 (Amazon Q CLI settings)

#### CLI 명령어로 설정 변경

```bash
q settings chat.defaultModel claude-4-sonnet
```

기타 유용한 설정 예시:

```bash
q settings app.disableAutoupdates true
q settings chat.enableThinking true
q settings chat.greeting.enabled false
q settings chat.enableHistoryHints true
```

#### 설정 파일 직접 열기

```bash
q settings open
```

* **macOS**: `~/Library/Application Support/amazon-q/settings.json`
* **Linux**: `~/.local/share/amazon-q/settings.json`

예시 파일 내용:

```json
{
  "chat.defaultModel": "claude-4-sonnet",
  "chat.editMode": "vi",
  "mcp.loadedBefore": true
}
```

#### 현재 설정 전체 보기

```bash
q settings all
```

개별 항목 확인:

```bash
q settings chat.editMode
```

도움말:

```bash
q settings help
```

***

### 🧪 실험적 기능 활성화 (Enable experimental features)

```bash
/experiment
```

실행 시 다음과 같은 화면이 나타납니다:

```
⚠ Experimental features may be changed or removed at any time

? Select an experiment to toggle ›
❯ Knowledge          [ON]  - 지속적인 컨텍스트 저장 및 세션 간 재사용 (/knowledge)
  Thinking           [OFF] - 단계별 사고 기반 복잡한 추론
  Tangent Mode       [OFF] - 독립적인 대화 모드
  Todo Lists         [OFF] - 할 일 목록 생성 및 관리 (/todos)
```

* 화살표로 이동하고 스페이스바(SPACE)를 눌러 ON/OFF 전환
* 선택한 항목은 설정 파일(`settings.json`)에 반영됨

***

### 📚 설정 가능한 항목 정리 (Available settings)

<table><thead><tr><th width="263.20318603515625">설정 키</th><th>설명</th></tr></thead><tbody><tr><td>chat.defaultAgent</td><td>기본 에이전트 설정 (<code>q agent create</code>로 생성한 에이전트 이름)</td></tr><tr><td>chat.enableNotifications</td><td>작업 완료 시 알림 여부</td></tr><tr><td>chat.greeting.enabled</td><td>ASCII 배너 비활성화</td></tr><tr><td>chat.editMode</td><td>채팅 편집 모드 (예: vi)</td></tr><tr><td>chat.skimCommandKey</td><td>skim 커맨드 단축키 설정</td></tr><tr><td>api.timeout</td><td>백엔드 호출 시 타임아웃 (기본 5분)</td></tr><tr><td>ssh.remote-prompt</td><td>원격 프롬프트 동작 방식</td></tr><tr><td>telemetry.enabled</td><td>텔레메트리 데이터 수집 여부</td></tr><tr><td>shell-integrations.enabled</td><td>셸 통합 사용 여부</td></tr><tr><td>mcp.initTimeout</td><td>MCP 서버 초기화 대기 시간 (ms)</td></tr><tr><td>chat.enableHistoryHints</td><td>힌트 표시 여부 (기본 true)</td></tr></tbody></table>

***

### 🔐 SigV4 인증 활성화 (Enabling SigV4 Authentication)

```bash
export AMAZON_Q_SIGV4=1
```

해당 환경 변수 설정 시, AWS 엔드포인트 접근 시 SigV4 인증이 활성화됩니다.

***

### 📼 세션 기록 자동화 (Recording your CLI sessions)

`~/.zshrc` 또는 `~/.bashrc`에 다음 함수 추가:

```bash
function qlog() {
  timestamp=$(date +"%Y%m%d_%H%M%S")
  logfile="$HOME/q_chat_logs/q_chat_$timestamp.txt"
  mkdir -p $HOME/q_chat_logs
  script -q /dev/null $(which q) chat | tee $logfile
}
```

이제 `qlog` 명령으로 세션을 자동 저장할 수 있습니다.

***

### 🔔 작업 완료 알림 설정 (Task Completion Notification)

```bash
q settings chat.enableNotifications true
```

작업 완료 시 터미널 알림이 울리며, 터미널 종류에 따라 알림 설정 가능

비활성화:

```bash
q settings chat.enableNotifications false
```

***

### 📖 참고 자료 (Supporting Resources)

* [The essential guide to installing Amazon Q Developer CLI on Windows](https://dev.to/aws/the-essential-guide-to-installing-amazon-q-developer-cli-on-windows-lmh)
* [The essential guide to installing Amazon Q Developer CLI on Linux](https://dev.to/aws/the-essential-guide-to-installing-amazon-q-developer-cli-on-linux-headless-and-desktop-3bo7)
* `/knowledge` 실험 기능 설명: ["Manage context rot by exploring new experimental features in Amazon Q CLI"](https://dev.to/aws/manage-context-rot-by-exploring-new-experimental-features-in-amazon-q-cli-10ki)

***

✅ 이제 모든 구성이 완료되었으며, Amazon Q CLI를 활용한 실전 워크플로우 실습으로 이어갈 준비가 되었습니다.
