---
description: 'Update : 2025.09.22'
---

# 03. Amazon Q CLI 고급 환경 설정 (New)

## 🧩 1. Amazon Q CLI 고급 구성 탐색

이 섹션은 Amazon Q CLI의 동작을 개인 환경에 맞게 최적화하고 조정하고자 하는 분들을 위한 것입니다.&#x20;

***

### 💻 디렉터리 구조 (Directory structure)

Amazon Q CLI는 터미널(Terminal)에서 실행할 수 있으며, 이때 현재 디렉터리는 “프로젝트 작업 공간 디렉터리(Project Workspace Directory)“로 간주됩니다.

Amazon Q CLI는 이 디렉터리 내부의 .amazonq/ 디렉터리에서 특정 설정 파일을 탐색합니다 (존재할 경우).

이와 더불어, Amazon Q CLI는 항상 다음의 글로벌 디렉터리(Global Directory) 경로도 참고합니다:

```
~/.aws/amazonq
```

여기에서도 설정 파일을 로드하여 동작합니다.

요약하면 다음과 같습니다:

| 범주                       | 디렉터리 경로                 | 설명                                                                                             |
| ------------------------ | ----------------------- | ---------------------------------------------------------------------------------------------- |
| Global Amazon Q CLI 디렉터리 | \~/.aws/amazonq         | Amazon Q CLI가 글로벌 구성(global configuration) 설정(예: context, profiles, MCP 설정 등)을 읽어들이는 기본 위치입니다. |
| Project Workspace 디렉터리   | ./.amazonq (현재 디렉터리 기준) | 현재 위치한 프로젝트에 대한 로컬 설정(local configuration) 파일들을 불러오는 위치입니다.                                    |

> 이 시점에서는 위 내용을 반드시 적용할 필요는 없습니다. Amazon Q CLI를 어떻게 맞춤화하고 최적화(configure) 할 수 있는지를 이해하기 위한 배경 정보를 제공하는 것입니다. 워크숍의 이후 섹션에서 이 내용들을 실습할 것입니다.

***

### 💻  로깅 및 디버깅 옵션 (Logging and Debugging Options)

Amazon Q CLI의 로그(log) 는 다음 위치에서 확인할 수 있습니다. 새로운 터미널 창에서 아래 경로를 탐색해보세요.

* macOS: `$TMPDIR/qlog/`
* Linux: `~/.local/share/amazonq/logs/`
* Windows: `~/.local/share/amazonq/logs/`

로그의 상세 수준(logging verbosity) 을 제어하고 싶다면, 환경 변수 Q\_LOG\_LEVEL 을 설정할 수 있습니다.

```
export Q_LOG_LEVEL=debug
q
```

Q\_LOG\_LEVEL은 다음의 수준 중 하나로 설정할 수 있습니다:

<table data-header-hidden><thead><tr><th width="138.318115234375"></th><th></th></tr></thead><tbody><tr><td>레벨(Level)</td><td>설명</td></tr><tr><td>error</td><td>오류 메시지(error messages) 만 출력 (기본값)</td></tr><tr><td>warn</td><td>경고(warning) 및 오류 메시지 출력</td></tr><tr><td>info</td><td>정보(informational), 경고, 오류 메시지 출력</td></tr><tr><td>debug</td><td>디버그(debug), 정보, 경고, 오류 메시지 출력</td></tr><tr><td>trace</td><td>상세한 추적 정보(trace-level logs) 를 포함한 모든 메시지 출력</td></tr></tbody></table>

#### ⚙️ 실시간 로그 확인 (Realtime Logging)

Amazon Q CLI의 실시간 로그 출력을 확인하고자 한다면, 터미널에서 다음 명령어를 실행하세요:

```
q debug log
```

로그 레벨 설정에 따라, CLI가 수행하는 다양한 작업에 대한 실시간 정보가 출력됩니다.

이 기능은 문제 해결(troubleshooting) 시 매우 유용하게 활용될 수 있습니다.

#### ⚙️ 기타 디버그 명령어

q debug help 명령어를 통해, 사용 가능한 기타 디버깅 옵션을 확인할 수 있습니다.

```
q debug help
```

사용 가능한 로그 레벨:

* `error`: 오류 메시지만 출력 (기본값)
* `warn`: 경고 및 오류 메시지
* `info`: 정보, 경고, 오류 메시지
* `debug`: 디버깅 포함 전체 로그
* `trace`: 매우 상세한 추적 로그 포함

#### ⚙️  실시간 로그 보기 (Realtime log monitoring)

```bash
q debug log
```

로그 레벨에 따라 실시간으로 정보를 확인할 수 있으며, 문제 해결에 유용합니다.

기타 명령어:

```bash
q debug help
```

***

### 💻  진단 정보 확인 (Getting diagnostic info)

```bash
q diagnostic
```

해당 명령어를 실행하면 CLI의 설치 상태에 대한 요약 정보를 확인할 수 있습니다.

출력 예시:

```ini
[q-details]
version = "1.16.2"
hash = "ad0c864cba444a41b06b43e119f1d6bbc21bcf06"
date = "2025-09-19T04:21:04.165863Z (3d ago)"
variant = "minimal"

[system-info]
chip = "Intel(R) Xeon(R) Platinum 8375C CPU @ 2.90GHz"
total-cores = 4
memory = "30.81 GB"

[system-info.os.linux]
kernel_version = "6.1.150-174.273.amzn2023.x86_64"
id = "amzn"
name = "Amazon Linux"
pretty_name = "Amazon Linux 2023.8.20250915"
version_id = "2023"
version = "2023"

[environment]
cwd = "/home/USER"
cli-path = "/home/USER"
os = "Linux"
shell-path = "/usr/bin/bash"
shell-version = "5.2.15"
terminal = "VSCode"
install-method = "unknown"

[env-vars]
PATH = "/home/USER/.local/bin:/usr/local/lib/code-server/lib/vscode/bin/remote-cli:/home/USER/.local/bin:/home/USER/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin"
Q_SET_PARENT_CHECK = "1"
SHELL = "/bin/bash"
TERM = "xterm-256color"
```

***

### 💻   설정 (Amazon Q CLI settings)

Amazon Q CLI는 사용자가 자신의 요구에 맞게 동작 방식을 조정할 수 있도록 다양한 구성 매개변수(configuration parameters)를 설정할 수 있게 해줍니다.  이러한 설정은 Amazon Q CLI 자체 명령어인 `q settings` 를 통해 직접 설정할 수 있으며, 설정 파일(configuration file) 을 수동으로 편집하는 방식으로도 가능합니다.

예를 들어, Amazon Q CLI가 사용하는 기본 모델(default model) 을 변경하고 싶다면, 터미널에서 다음 명령어를 사용할 수 있습니다:

#### ⚙️ CLI 명령어로 설정 변경

```bash
q settings chat.defaultModel claude-4-sonnet
```

#### ⚙️ 유용하거나 흥미로운 설정 항목 몇 가지

* Amazon Q CLI의 자동 업데이트(auto update) 를 비활성화합니다.

```
q settings app.disableAutoupdates true
```

* Thinking 모드를 활성화합니다. 이 모드는 특정 상황에서 더 나은 결과를 제공할 수 있습니다.

```
q settings chat.enableThinking true
```

* 시작 시 출력되는 Amazon Q의 아스키 배너(ASCII banner) 를 비활성화합니다.

```
q settings chat.greeting.enabled false
```

*   인라인 프롬프트 힌트(Inline prompt hints) 를 활성화합니다 (기본값은 비활성화).

    대화(chat) 중 프롬프트 입력을 시작할 때 힌트가 회색 텍스트(ghost text)로 표시되며,

    `/` 입력 시 명령어 힌트를, 일반 텍스트 입력 시 이전 프롬프트 이력을 기반으로 제안됩니다.

    → 오른쪽 화살표 키를 눌러 힌트를 적용할 수 있습니다.

```
q settings chat.enableHistoryHints true
```

#### ⚙️ 설정 파일 직접 열기

설정 파일을 직접 열어보고 싶다면, 다음 명령어를 사용하면 기본 에디터(default editor) 로 설정 파일이 열립니다:

```bash
q settings open
```

예시로, macOS에서는 설정 파일이 다음 경로에 저장됩니다:

* **macOS**: `~/Library/Application Support/amazon-q/settings.json`
* **Linux**: `~/.local/share/amazon-q/settings.json`

macos 예시 파일 내용:

```json
cat ~/Library/Application\ Support/amazon-q/settings.json                                                                                                                                     21:46
{
  "ai.terminal-hash-sub": true,
  "app.beta": true,
  "autocomplete.theme": "light",
  "chat.defaultModel": "claude-4-sonnet",
  "integrations.hyper.disabled": true,
  "integrations.iterm.disabled": false,
  "integrations.terminal.disabled": false,
  "integrations.vscode.disabled": false,
  "mcp.loadedBefore": true,
  "mcp.noInteractiveTimeout": 30
}                                 
```

#### 현재 설정 전체 보기

```bash
q settings all
```

도움말:

```bash
q settings help
```

***

## 🧩 2. 실험적 기능 활성화 (Enable experimental features)

Amazon Q CLI에서는 종종 베타(Beta) 또는 실험적 기능(Experimental Features) 으로 새롭게 도입된 기능들을 사전에 체험해볼 수 있도록 제공합니다. 이러한 기능들은 기본적으로 비활성화되어 있으며, 사용자가 직접 활성화해야 사용할 수 있습니다.

이 기능들은 Amazon Q CLI 세션 내에서 /experiment 명령어를 통해 간단히 설정할 수 있습니다. 해당 명령어를 실행하면 현재 사용 가능한 모든 실험적 기능들의 목록이 표시되며, 원하는 기능을 선택하여 켜거나 끌 수 있습니다.

```bash
/experiment
```

실행 시 다음과 같은 화면이 나타납니다:

```
⚠ Experimental features may be changed or removed at any time

? Select an experiment to toggle ›
❯ Knowledge          [ON]  - 대화 세션 간 지속적인 컨텍스트 저장 및 조회 기능 활성화 (/knowledge)
  Thinking           [OFF] - 단계별 사고 과정을 통한 복잡한 추론 기능 활성화
  Tangent Mode       [OFF] - 일시적인 독립된 대화 모드를 활성화 (/tangent)
  Todo Lists         [OFF] - /todos 명령어를 통해 관리 가능한 할 일 목록 생성 기능 활성화 (/todos)
```

* 화살표로 이동하고 스페이스바(SPACE)를 눌러 ON/OFF 전환
* 선택한 항목은 설정 파일(`settings.json`)에 반영됨

***

### 💻  실험적 기능 소개

*   Knowledge

    지속적인 컨텍스트 저장 및 불러오기 기능을 활성화합니다. 이 기능은 /knowledge 명령어를 통해 사용되며, 여러 대화 세션 간에 컨텍스트를 공유할 수 있게 해줍니다.
*   Thinking&#x20;

    Amazon Q CLI가 복잡한 문제를 해결할 때, 단계별로 사고하며 추론할 수 있도록 도와주는 기능입니다. 특정 사용 사례에서 더 정밀한 결과를 얻을 수 있습니다.
*   Tangent Mode&#x20;

    현재의 대화 흐름과 독립적인 새로운 대화 모드를 제공합니다. /tangent 명령어를 통해 활성화할 수 있으며, 임시적으로 고립된 질문을 하거나 테스트할 때 유용합니다.
*   Todo Lists

    할 일 목록(To-do list)을 생성하여 /todos 명령어로 조회하고, 선택 및 순차 진행할 수 있는 기능을 활성화합니다.

#### ⚙️  설정 파일 연동

이 실험적 기능들은 앞서 살펴본 Amazon Q CLI 설정 파일(settings.json) 에도 영향을 줍니다. /experiment 명령어를 통해 기능을 활성화하거나 비활성화하면, 자동으로 설정 파일 내의 값도 업데이트됩니다.

예를 들어, Todo Lists 기능을 활성화하면 다음과 같은 항목이 settings.json 파일에 추가됩니다:

```
{
  "chat.enableTodoLists": true
}
```

***

### 💻 설정 가능한 항목 정리 (Available settings)

Amazon Q CLI는 오픈 소스(Open Source) 프로젝트이므로, 해당 소스 파일을 직접 확인하여 설정 가능한 항목들을 확인할 수 있습니다. 다음은 그 과정을 통해 수집된 설정 목록입니다.&#x20;

#### ⚙️ 일반 설정 항목 (General Settings)

*   chat.defaultAgent (string)

    Amazon Q CLI 시작 시 사용할 기본 에이전트(Default Agent) 를 설정합니다. 에이전트 이름은 q agent create 명령어를 사용할 때 지정한 이름입니다.
*   chat.enableNotifications (boolean)

    채팅 중 알림 기능을 활성화합니다. _(기본값: false)_
*   chat.greeting.enabled (boolean)

    채팅을 시작할 때 환영 메시지(Greeting Message) 를 표시합니다. _(기본값: true)_
*   chat.editMode (string)

    채팅 인터페이스에서 사용할 에디트 모드(Edit Mode) 를 설정합니다. 예: "vi", "emacs" 등.
*   chat.skimCommandKey (string)

    채팅 인터페이스에서 사용하는 skim 명령 키 를 설정합니다. _(기본값: ctrl + s)_

#### ⚙️ API 및 시간 관련 설정 (Timeouts)

*   api.timeout (integer, milliseconds)

    Amazon Q 백엔드 API 호출 시 기본 시간 초과(timeout) 를 설정합니다. _(기본값: 300000 ms = 5분)_

#### ⚙️ 원격 및 쉘 통합 설정 (Remote & Shell)

*   ssh.remote-prompt (string)

    원격 SSH 프롬프트(Remote Prompt)의 기본 동작을 설정합니다. _(기본값: "ask")_
*   ssh.remote-prompt.timeout (integer, milliseconds)

    원격 프롬프트에 대한 시간 초과 설정입니다. _(기본값: 2000 ms)_
*   shell-integrations.enabled (boolean)

    셸 통합(Shell Integration) 기능을 활성화합니다. _(기본값: true)_
*   shell-integrations.immediateLogin (boolean)

    셸 통합 시 즉시 로그인 프롬프트를 표시할지를 설정합니다.

#### ⚙️ 텔레메트리 및 파일 설정 (Telemetry & Dotfiles)

*   telemetry.enabled (boolean)

    사용자 행동 데이터 수집(Telemetry) 기능을 활성화합니다. _(기본값: true)_
*   dotfiles.enabled (boolean)

    Dotfiles(숨김 설정 파일) 관리 기능을 활성화합니다. _(기본값: true)_

#### ⚙️ MCP (Model Context Protocol) 관련 설정

*   mcp.loadedBefore (boolean)

    MCP 서버가 이전에 로드된 적이 있는지를 추적합니다.
*   mcp.initTimeout (integer, milliseconds)

    대화형 모드(interactive mode) 에서 MCP 서버를 기다리는 기본 시간 초과 설정입니다. _(기본값: 5000 ms = 5초)_
*   mcp.noInteractiveTimeout (integer, milliseconds)

    비대화형 모드(non-interactive mode) 에서 MCP 서버를 기다리는 기본 시간 초과 설정입니다. _(기본값: 30000 ms = 30초)_

#### ⚙️ 사용자 경험 관련 설정 (UX Settings)

*   chat.enableHistoryHints (boolean)

    명령어를 입력할 때 이전 입력 힌트(history-based ghost text) 를 활성화할지 여부를 설정합니다. _(기본값: true)_

    * /를 입력하면 관련 명령어 제안을 보여주며, 일반 문자를 입력하면 과거 프롬프트 기록을 기준으로 회색 텍스트 힌트가 자동 제안됩니다. 방향키(→)를 눌러 적용할 수 있습니다.

***

### 💻 SigV4 인증 활성화 (Enabling SigV4 Authentication)

Amazon Q CLI v1.12.6 이상에서는 SigV4(Signature Version 4) 인증 방식을 실험적 기능(Experimental Feature) 으로 활성화할 수 있습니다. 이를 통해 Amazon Q CLI가 AWS 엔드포인트에 접근할 때 IAM 기반 인증을 적용할 수 있습니다.

```bash
export AMAZON_Q_SIGV4=1
```

이 설정을 적용한 이후 Amazon Q CLI를 실행하면, SigV4 인증이 활성화된 상태로 AWS 서비스에 접근할 수 있습니다.

### 💻  세션 기록 자동화 (Recording your CLI sessions)

때때로 Amazon Q CLI 세션의 전체 기록을 저장하고 싶을 때가 있습니다. 이럴 경우, 간단한 bash/zsh 셸 함수를 활용하여 자동으로 로그를 저장할 수 있습니다.

`~/.zshrc` 또는 `~/.bashrc`에 다음 함수 추가:

```bash
function qlog() {
  timestamp=$(date +"%Y%m%d_%H%M%S")
  logfile="$HOME/q_chat_logs/q_chat_$timestamp.txt"
  mkdir -p $HOME/q_chat_logs
  script -q /dev/null $(which q) chat | tee $logfile
}
```

* `timestamp=$(date +"%Y%m%d_%H%M%S")` : 현재 날짜와 시간을 기반으로 로그 파일 이름을 생성합니다.
* `logfile="$HOME/q_chat_logs/q_chat_$timestamp.txt"` : 로그가 저장될 경로 및 파일 이름을 지정합니다.
* `mkdir -p $HOME/q_chat_logs` :  로그 디렉터리(`~/q_chat_logs`)가 없으면 생성합니다.
* `script -q /dev/null $(which q) chat | tee $logfile` :  Amazon Q CLI 세션을 실행하면서 모든 출력 내용을 실시간으로 화면에 출력(tee) 하고, 동시에 로그 파일로 저장합니다.

이제 `qlog` 명령으로 세션을 자동 저장할 수 있습니다.

```
qlog
```

이 명령을 입력하면 Q CLI가 실행되고, 로그는 자동으로 \~/q\_chat\_logs/ 디렉토리에 저장됩니다.

***

### 💻   작업 완료 알림 설정 (Task Completion Notification)

Amazon Q CLI를 사용하여 복잡한 작업을 수행할수록, 터미널에서 실행 중인 작업이 완료되었는지 수시로 확인하는 일이 번거로울 수 있습니다.

이를 효율적으로 해결하려면, 작업 완료 시 알림을 받도록 설정할 수 있습니다.

```bash
q settings chat.enableNotifications true
```

이 설정을 적용하면 Amazon Q CLI가 작업을 완료했을 때, 사용 중인 터미널의 알림 시스템을 통해 알림을 전송합니다.

비활성화:

```bash
q settings chat.enableNotifications false
```

***

### 📖 참고 자료 (Supporting Resources)

* [The essential guide to installing Amazon Q Developer CLI on Windows](https://dev.to/aws/the-essential-guide-to-installing-amazon-q-developer-cli-on-windows-lmh)
* [The essential guide to installing Amazon Q Developer CLI on Linux](https://dev.to/aws/the-essential-guide-to-installing-amazon-q-developer-cli-on-linux-headless-and-desktop-3bo7)
* `/knowledge` 실험 기능 설명: ["Manage context rot by exploring new experimental features in Amazon Q CLI"](https://dev.to/aws/manage-context-rot-by-exploring-new-experimental-features-in-amazon-q-cli-10ki)

