# 05. Amazon Q CLI로 자동화 구현하기

이번 장에서는 이전에 구축한 고객 피드백 애플리케이션을 기반으로, 자동화된 빌드 및 패키징 환경을 구성합니다. Amazon Q CLI의 도움을 받아 컨테이너화, 빌드 스크립트 생성, GitHub Actions 자동화 설정까지 순차적으로 진행해보겠습니다.

***

### ⚙️ Task 01: Gunicorn으로 실행 방식 변경

Amazon Q CLI를 통해 애플리케이션을 서버 환경에서도 실행 가능하도록 수정합니다.

```
> Update the project so that it uses gunicorn to run.
```

* gunicorn 설정 추가 (예: gunicorn --bind 0.0.0.0:8000 src.app:app)
* 필요한 경우 requirements.txt 자동 갱신

***

### 🐳 Task 02: 컨테이너 실행 진입 스크립트 생성

```
> This project is going to run via containers. Create an entrypoint.sh script that I can use.
```

Amazon Q CLI는 다음을 생성할 수 있습니다:

* entrypoint.sh
* Dockerfile
* docker-compose.yaml (선택적으로 생성됨)

> 생성된 스크립트는 chmod +x entrypoint.sh 로 실행 권한 부여 필요

***

### 📦 Task 03: 컨테이너 빌드 자동화 스크립트 생성

```
> Create a container build script that automates the task of building and tagging the container image. Pass in a release version (e.g., 1.0.0). I am not using Docker but Finch.
```

예상 결과:

* build-container.sh 스크립트 생성
* 다중 아키텍처(x86\_64, arm64) 이미지 빌드 구성
* (선택) 버전 정보 포함 및 태깅 처리
* (선택) 컨테이너 레지스트리 푸시 관련 코드는 삭제 가능

> Finch 외 Podman, Rancher 등 다른 런타임을 사용하는 경우, 프롬프트 내용을 조정하세요.



#### 🧪 빌드 테스트

```
bash build-container.sh 1.0.0
```

***

### 🔁 Task 04: GitHub Actions CI/CD 구성

```
> I want to use GitHub actions to automatically build the container image every time the code changes. Can you provide all the configuration details and update the project. Do not add tests.
```

Amazon Q CLI가 자동으로 다음을 생성:

* .github/workflows/build.yml
* push 또는 pull\_request 기반 트리거 구성

> 실제 GitHub 저장소에 연결하려면 git init, git add, git commit, git remote add, git push 수행 필요

#### 🧩 트러블슈팅 예시

* 권한 오류 발생 시: Amazon Q CLI에 문제 상황을 프롬프트로 전달하여 자동 해결 방안 생성 가능

***

### ✅ 요약

이번 실습에서는 다음을 자동화했습니다:

* Gunicorn 기반 서버 실행 환경 구성
* 컨테이너 실행 스크립트 및 Dockerfile 생성
* Finch 기반 멀티 아키텍처 컨테이너 이미지 빌드 스크립트
* GitHub Actions 기반 CI/CD 파이프라인 설정\


Amazon Q CLI를 활용하면 반복 작업을 자동화하고, DevOps 워크플로우를 빠르게 구현할 수 있습니다.

다음 장에서는 대규모 코드베이스 분석 및 이해하기 실습으로 이어집니다.
